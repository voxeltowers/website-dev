(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17],{6794:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/faucet",function(){return t(6403)}])},8292:function(e,n,t){"use strict";var r=t(5893),i=t(8527);n.Z=function(e){return(0,r.jsx)(i.kC,{flexDirection:"column",minHeight:"100vh",overflow:"hidden",children:e.children})}},9370:function(e,n,t){"use strict";var r=t(5893),i=t(9008);n.Z=function(e){return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.default,{children:[(0,r.jsx)("title",{children:e.title||"VoxelTowers"}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("link",{rel:"shortcut icon",type:"image/svg",href:"".concat("/website-dev","/assets/voxel-towers-logo.svg")})]}),e.children]})}},2074:function(e,n,t){"use strict";t.d(n,{J:function(){return d}});var r=t(4051),i=t.n(r),o=t(1438),c=t(8928),s=t(5553);function a(e,n,t,r,i,o,c){try{var s=e[o](c),a=s.value}catch(u){return void t(u)}s.done?n(a):Promise.resolve(a).then(r,i)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function c(e){a(o,r,i,c,s,"next",e)}function s(e){a(o,r,i,c,s,"throw",e)}c(void 0)}))}}function l(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.provider=new o.cK(n.rpcUrl),this.confirmationsThreshold=n.confirmationsThreshold||2,this.confirmationWaitingTimeoutSec=n.confirmationWaitingTimeoutSec||120,this.confirmationPollIntervalSec=n.confirmationPollIntervalSec||5}var n,t,r;return n=e,t=[{key:"sendEth",value:function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return u(i().mark((function o(){var s,a;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=new c.w5(n.senderPrivKey,r.provider),i.next=3,s.sendTransaction({to:n.receiverAddress,value:e.ethToWei(n.amountInEth)});case 3:if(a=i.sent,!t){i.next=7;break}return i.next=7,r.waitForConfirmation(a.hash);case 7:return i.abrupt("return",a);case 8:case"end":return i.stop()}}),o)})))()}},{key:"getBalance",value:function(n){var t=this;return u(i().mark((function r(){var o,c;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.provider.getBalance(n);case 2:return o=r.sent,c=e.weiToEth(o),r.abrupt("return",c);case 5:case"end":return r.stop()}}),r)})))()}},{key:"waitForConfirmation",value:function(e){var n=this;return u(i().mark((function t(){var r,o,c,s,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,c=Math.round(n.confirmationWaitingTimeoutSec/n.confirmationPollIntervalSec),s=0;case 4:if(!(s<=c)){t.next=23;break}return t.next=8,null===(a=n.provider)||void 0===a?void 0:a.getTransaction(e);case 8:if(!((o=t.sent)&&o.confirmations>=n.confirmationsThreshold)){t.next=14;break}return r=!0,t.abrupt("break",23);case 14:if(s!==c){t.next=18;break}return t.abrupt("break",23);case 18:return t.next=20,n.sleep(n.confirmationPollIntervalSec);case 20:s++,t.next=4;break;case 23:if(r){t.next=25;break}throw new Error("confirmation waiting timeout");case 25:case"end":return t.stop()}}),t)})))()}},{key:"sleep",value:function(e){return new Promise((function(n){return setTimeout(n,1e3*e)}))}},{key:"fundAddressUpTo",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=this;return u(i().mark((function r(){var o,c,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getBalance(e.receiverAddress);case 2:if(o=r.sent,!((c=e.amountInEth-o)>0)){r.next=9;break}return r.next=8,t.sendEth({senderPrivKey:e.senderPrivKey,amountInEth:c,receiverAddress:e.receiverAddress},n);case 8:s=r.sent;case 9:return r.abrupt("return",s);case 10:case"end":return r.stop()}}),r)})))()}}],r=[{key:"weiToEth",value:function(e){return parseFloat(s.dF(e))}},{key:"ethToWei",value:function(e){return s.fi(e.toString())}}],t&&l(n.prototype,t),r&&l(n,r),e}()},6403:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r,i=t(5893),o=t(9795),c=t(7294),s=t(3238),a=t(8527),u=t(9762),l=t(4612),d=t(6723),f=t(8292),h=t(9370),v=t(7786),x=t(8152),p=t(4651),m=function(e){var n=e.show,t=e.title,r=c.useRef();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(v.aR,{isOpen:n,leastDestructiveRef:r,onClose:null,children:(0,i.jsx)(v.dh,{children:(0,i.jsxs)(v._T,{bg:"#160045",children:[(0,i.jsx)(v.fY,{color:"white",fontSize:"lg",fontWeight:"bold",children:t}),(0,i.jsx)(v.iP,{display:"flex",justifyContent:"center",children:(0,i.jsx)(x.D8,{isIndeterminate:!0,thickness:"4px",size:"100px",color:"#FDA291",children:(0,i.jsx)(x.ip,{as:a.kC,justifyContent:"center",color:"white",children:(0,i.jsx)(p.Ee,{w:"30px",src:"assets/loader.gif"})})})})]})})})})},g=t(2660),w=t(2074),E="0x8fA98E72788A9200B41113728F8aDEd1597a99FE",b="0xce603e4a7db7c0c7fc74937792124c36396d5d9999b357384fd142b4f8e85320",k=new w.J({rpcUrl:g.$G,confirmationsThreshold:1});!function(e){e[e.HIDE=0]="HIDE",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR",e[e.ENOUGH_FUNDS=3]="ENOUGH_FUNDS"}(r||(r={}));var S=function(){var e=(0,o.Ge)().account,n=(0,c.useState)(""),t=n[0],v=n[1],x=(0,c.useState)(!1),p=x[0],g=x[1],w=(0,c.useState)(0),S=w[0],j=w[1],y=(0,c.useState)(r.HIDE),C=y[0],T=y[1],I=(0,s.pm)();(0,c.useEffect)((function(){C===r.SUCCESS&&I({title:"Success",description:"Account successfully funded!",status:"success",duration:5e3,isClosable:!0}),C===r.ENOUGH_FUNDS&&I({title:"Warning",description:"Account not funded because balance is greater than ".concat(1,"\n            ."),status:"warning",duration:5e3,isClosable:!0}),C===r.ERROR&&I({title:"Error",description:"Ooops. An Error occurred :(. Check console for more details.",status:"error",duration:5e3,isClosable:!0})}),[C]);return(0,c.useEffect)((function(){return e=E,n=j,g(!0),void k.getBalance(e).then((function(e){return n(e)})).catch((function(e){return console.log(e)})).finally((function(){return g(!1)}));var e,n}),[]),(0,c.useEffect)((function(){return v(e)}),[e]),(0,i.jsx)(h.Z,{children:(0,i.jsx)(f.Z,{children:(0,i.jsxs)(a.W2,{p:"8",height:"100vh",maxW:"container.md",children:[(0,i.jsx)(a.X6,{mb:"5",as:"h2",size:"2xl",isTruncated:!0,children:"Faucet"}),(0,i.jsxs)(a.QI,{mb:8,children:[(0,i.jsxs)(a.HC,{children:["Faucet Address: ",E]}),(0,i.jsxs)(a.HC,{children:["ETH left: ",S]}),(0,i.jsxs)(a.HC,{children:["Account will be funded up to ",1," ETH"]})]}),(0,i.jsxs)(u.NI,{mb:"5",id:"address",children:[(0,i.jsx)(u.lX,{children:"Set your Ethereum Address"}),(0,i.jsx)(l.II,{bg:"white",color:"black",type:"address",value:t,onChange:function(e){return v(e.target.value)}})]}),(0,i.jsx)(d.zx,{_hover:{backgroundPosition:"right center"},backgroundImage:"linear-gradient(to right, #EF7383 0%, #FDA291 50%,#EF7383 100%)",backgroundSize:"200% auto",transition:"0.5s",onClick:function(){T(r.HIDE),g(!0),k.fundAddressUpTo({amountInEth:1,receiverAddress:t,senderPrivKey:b}).then((function(e){console.log("Funded successfully!!"),console.log("Tx:",e),T(e?r.SUCCESS:r.ENOUGH_FUNDS)})).catch((function(e){T(r.ERROR),console.log(e)})).finally((function(){return g(!1)}))},bg:"#220069",color:"white",p:"5",_active:{backgroundImage:"linear-gradient(to right, #220069 0%, #220069 50%,#220069 100%)"},children:"GO"}),(0,i.jsx)(m,{show:p,title:"Interacting with Blockchain..."})]})})})}}},function(e){e.O(0,[199,307,773,774,888,179],(function(){return n=6794,e(e.s=n);var n}));var n=e.O();_N_E=n}]);