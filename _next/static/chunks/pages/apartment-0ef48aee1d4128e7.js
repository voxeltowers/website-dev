(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{4649:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apartment",function(){return t(8392)}])},2074:function(e,n,t){"use strict";t.d(n,{J:function(){return d}});var r=t(4051),a=t.n(r),i=t(1438),o=t(8928),s=t(5553);function u(e,n,t,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,a)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){u(i,r,a,o,s,"next",e)}function s(e){u(i,r,a,o,s,"throw",e)}o(void 0)}))}}function l(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.provider=new i.cK(n.rpcUrl),this.confirmationsThreshold=n.confirmationsThreshold||2,this.confirmationWaitingTimeoutSec=n.confirmationWaitingTimeoutSec||120,this.confirmationPollIntervalSec=n.confirmationPollIntervalSec||5}var n,t,r;return n=e,t=[{key:"sendEth",value:function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return c(a().mark((function i(){var s,u;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=new o.w5(n.senderPrivKey,r.provider),a.next=3,s.sendTransaction({to:n.receiverAddress,value:e.ethToWei(n.amountInEth)});case 3:if(u=a.sent,!t){a.next=7;break}return a.next=7,r.waitForConfirmation(u.hash);case 7:return a.abrupt("return",u);case 8:case"end":return a.stop()}}),i)})))()}},{key:"getBalance",value:function(n){var t=this;return c(a().mark((function r(){var i,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.provider.getBalance(n);case 2:return i=r.sent,o=e.weiToEth(i),r.abrupt("return",o);case 5:case"end":return r.stop()}}),r)})))()}},{key:"waitForConfirmation",value:function(e){var n=this;return c(a().mark((function t(){var r,i,o,s,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,o=Math.round(n.confirmationWaitingTimeoutSec/n.confirmationPollIntervalSec),s=0;case 4:if(!(s<=o)){t.next=23;break}return t.next=8,null===(u=n.provider)||void 0===u?void 0:u.getTransaction(e);case 8:if(!((i=t.sent)&&i.confirmations>=n.confirmationsThreshold)){t.next=14;break}return r=!0,t.abrupt("break",23);case 14:if(s!==o){t.next=18;break}return t.abrupt("break",23);case 18:return t.next=20,n.sleep(n.confirmationPollIntervalSec);case 20:s++,t.next=4;break;case 23:if(r){t.next=25;break}throw new Error("confirmation waiting timeout");case 25:case"end":return t.stop()}}),t)})))()}},{key:"sleep",value:function(e){return new Promise((function(n){return setTimeout(n,1e3*e)}))}},{key:"fundAddressUpTo",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=this;return c(a().mark((function r(){var i,o,s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getBalance(e.receiverAddress);case 2:if(i=r.sent,!((o=e.amountInEth-i)>0)){r.next=9;break}return r.next=8,t.sendEth({senderPrivKey:e.senderPrivKey,amountInEth:o,receiverAddress:e.receiverAddress},n);case 8:s=r.sent;case 9:return r.abrupt("return",s);case 10:case"end":return r.stop()}}),r)})))()}}],r=[{key:"weiToEth",value:function(e){return parseFloat(s.dF(e))}},{key:"ethToWei",value:function(e){return s.fi(e.toString())}}],t&&l(n.prototype,t),r&&l(n,r),e}()},8392:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var r=t(4051),a=t.n(r),i=t(5893),o=t(3238),s=t(8527),u=t(4651),c=t(7398),l=t(6723),d=t(7294),p=t(1664),f=t(9795),v=t(6076),h=t(3804),m=t(3767),y=t(8292),x=t(9370),b=t(2660),w=t(4825),g=t(4455),k=t(9384),T=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"voxelTowersAddress_","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"buyPool","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"hasPool","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),j=t(2074);function P(e,n,t,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,a)}var E=function(){var e,n,t=(0,o.pm)(),r=(0,f.Ge)(),E=r.library,S=r.active,_=(0,d.useState)({}),C=_[0],I=_[1],O=(0,d.useState)(""),A=O[0],M=O[1],N=(0,d.useState)(null),W=N[0],R=N[1],U=(0,d.useState)(!1),z=U[0],F=U[1];(0,d.useEffect)((function(){var e=new URLSearchParams(window.location.search),n=Number(new URLSearchParams(e).get("tokenId"));n&&(R(n),K(n))}),[]),(0,d.useEffect)((function(){if(C.image){var e=b.i6.split(","),n="".concat(e[0],"/").concat(C.image.slice(7));M(n)}}),[C]);var K=function(e){w.Z.tokenURI(e).then((function(e){return I((0,k.g)(e))})).catch((function(e){return console.log(e)}))},X=function(e){return new v.CH(b.pX,T.Mt,E.getSigner()).buyPool(e,{value:j.J.ethToWei(Number(b.K_))})},Z=function(){var e,n=(e=a().mark((function e(n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(n);case 3:return r=e.sent,F(!0),i=new j.J({rpcUrl:b.$G,confirmationsThreshold:1}),e.next=8,i.waitForConfirmation(r.hash);case 8:t({title:"Pool added successfully",description:"",status:"success",duration:2e3,isClosable:!0}),K(n),F(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),F(!1),t({title:"Pool was not added",description:"",status:"error",duration:5e3,isClosable:!0});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){P(i,r,a,o,s,"next",e)}function s(e){P(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}(),B=function(){return"Yes"===function(e,n){var t;return null===(t=null===e||void 0===e?void 0:e.find((function(e){return e.trait_type===n})))||void 0===t?void 0:t.value}(null===C||void 0===C?void 0:C.attributes,"Pool")};return(0,i.jsx)(x.Z,{children:(0,i.jsxs)(y.Z,{children:[(0,i.jsxs)(s.kC,{children:[" ",(0,i.jsx)(u.Ee,{display:{base:"none",md:"block"},width:"100px",src:"".concat("/website-dev","/assets/voxel-towers-logo.svg")}),(0,i.jsx)(m.Z,{})," "]}),(0,i.jsxs)("div",{style:{position:"relative",marginBottom:"40px"},children:[(0,i.jsx)(u.Ee,{p:6,src:"".concat("/website-dev","/assets/apartments_filter_image.png")}),(0,i.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",textAlign:"center"},children:(0,i.jsx)(s.X6,{fontSize:{base:"20px",md:"50px"},children:null===C||void 0===C||null===(e=C.name)||void 0===e?void 0:e.replace(/ *\([^)]*\) */g,"")})})]}),(0,i.jsxs)(s.W2,{mb:20,maxW:"container.xl",children:[(0,i.jsx)(s.X6,{textAlign:"center",fontSize:{base:"20px",md:"28px"},mb:12,children:C.name}),(0,i.jsxs)(s.MI,{mb:8,templateColumns:{base:"1fr",md:"1fr 2fr 1fr"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(s.QI,{fontWeight:"600",listStyleType:"none",p:0,m:0,mb:8,children:null===C||void 0===C||null===(n=C.attributes)||void 0===n?void 0:n.map((function(e,n){return(0,i.jsxs)(s.HC,{p:2,children:[e.trait_type,": ",e.value]},n)}))})}),(0,i.jsx)(u.Ee,{gridRowStart:{base:1,md:"auto"},margin:"auto",src:A}),(0,i.jsx)("div",{children:(0,i.jsx)(s.gC,{spacing:"24px",alignItems:"left",children:(0,i.jsx)(c.u,{isDisabled:S&&!B(),label:S?"Apartment has already a pool":"Please connect your wallet",children:(0,i.jsx)("div",{children:(0,i.jsx)(l.zx,{p:6,w:"100%",isLoading:z,bg:"none",leftIcon:(0,i.jsx)(g.k6,{}),borderRadius:0,border:"1px solid black",disabled:B()||!S,onClick:function(){return Z(W)},children:"POOL UPGRADE"})})})})})]}),(0,i.jsx)(s.kC,{mb:8,justifyContent:"center",children:(0,i.jsx)(p.default,{passHref:!0,href:"".concat(b.xC,"/assets/").concat(b.RY,"/").concat(W),children:(0,i.jsx)(l.zx,{fontSize:"12px",color:"white",borderRadius:"24px",bg:"#0A2240",children:"VIEW ON OPENSEA"})})})]}),(0,i.jsx)(h.Z,{})]})})}}},function(e){e.O(0,[445,937,199,289,307,294,596,556,774,888,179],(function(){return n=4649,e(e.s=n);var n}));var n=e.O();_N_E=n}]);