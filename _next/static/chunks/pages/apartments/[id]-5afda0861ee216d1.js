(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{8589:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apartments/[id]",function(){return t(5976)}])},2074:function(e,n,t){"use strict";t.d(n,{J:function(){return d}});var r=t(4051),i=t.n(r),a=t(1438),o=t(8928),s=t(5553);function u(e,n,t,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function l(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.provider=new a.cK(n.rpcUrl),this.confirmationsThreshold=n.confirmationsThreshold||2,this.confirmationWaitingTimeoutSec=n.confirmationWaitingTimeoutSec||120,this.confirmationPollIntervalSec=n.confirmationPollIntervalSec||5}var n,t,r;return n=e,t=[{key:"sendEth",value:function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return c(i().mark((function a(){var s,u;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=new o.w5(n.senderPrivKey,r.provider),i.next=3,s.sendTransaction({to:n.receiverAddress,value:e.ethToWei(n.amountInEth)});case 3:if(u=i.sent,!t){i.next=7;break}return i.next=7,r.waitForConfirmation(u.hash);case 7:return i.abrupt("return",u);case 8:case"end":return i.stop()}}),a)})))()}},{key:"getBalance",value:function(n){var t=this;return c(i().mark((function r(){var a,o;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.provider.getBalance(n);case 2:return a=r.sent,o=e.weiToEth(a),r.abrupt("return",o);case 5:case"end":return r.stop()}}),r)})))()}},{key:"waitForConfirmation",value:function(e){var n=this;return c(i().mark((function t(){var r,a,o,s,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,o=Math.round(n.confirmationWaitingTimeoutSec/n.confirmationPollIntervalSec),s=0;case 4:if(!(s<=o)){t.next=23;break}return t.next=8,null===(u=n.provider)||void 0===u?void 0:u.getTransaction(e);case 8:if(!((a=t.sent)&&a.confirmations>=n.confirmationsThreshold)){t.next=14;break}return r=!0,t.abrupt("break",23);case 14:if(s!==o){t.next=18;break}return t.abrupt("break",23);case 18:return t.next=20,n.sleep(n.confirmationPollIntervalSec);case 20:s++,t.next=4;break;case 23:if(r){t.next=25;break}throw new Error("confirmation waiting timeout");case 25:case"end":return t.stop()}}),t)})))()}},{key:"sleep",value:function(e){return new Promise((function(n){return setTimeout(n,1e3*e)}))}},{key:"fundAddressUpTo",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=this;return c(i().mark((function r(){var a,o,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getBalance(e.receiverAddress);case 2:if(a=r.sent,!((o=e.amountInEth-a)>0)){r.next=9;break}return r.next=8,t.sendEth({senderPrivKey:e.senderPrivKey,amountInEth:o,receiverAddress:e.receiverAddress},n);case 8:s=r.sent;case 9:return r.abrupt("return",s);case 10:case"end":return r.stop()}}),r)})))()}}],r=[{key:"weiToEth",value:function(e){return parseFloat(s.dF(e))}},{key:"ethToWei",value:function(e){return s.fi(e.toString())}}],t&&l(n.prototype,t),r&&l(n,r),e}()},5976:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var r=t(4051),i=t.n(r),a=t(5893),o=t(3238),s=t(8527),u=t(4651),c=t(6723),l=t(1163),d=t(7294),p=t(9795),f=t(6076),v=t(3804),m=t(3767),h=t(8292),y=t(9370),b=t(2660),x=t(4825),w=t(4455),g=t(9384),k=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"voxelTowersAddress_","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"buyPool","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"hasPool","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),T=t(2074);function P(e,n,t,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,i)}var j=function(){var e,n,t=(0,l.useRouter)(),r=t.query.id,j=(0,d.useState)({}),E=j[0],_=j[1],S=(0,d.useState)(""),C=S[0],I=S[1],O=(0,d.useState)(!1),M=O[0],A=O[1],N=(0,o.pm)(),W=(0,p.Ge)(),F=W.library,K=W.active;(0,d.useEffect)((function(){r&&R(Number(r))}),[t]),(0,d.useEffect)((function(){if(E.image){var e=b.i6.split(","),n="".concat(e[0],"/").concat(E.image.slice(7));I(n)}}),[E]);var R=function(e){x.Z.tokenURI(e).then((function(e){return _((0,g.g)(e))})).catch((function(e){return console.log(e)}))},U=function(e){return new f.CH(b.pX,k.Mt,F.getSigner()).buyPool(e,{value:T.J.ethToWei(Number(b.K_))})},X=function(){var e,n=(e=i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(n);case 3:return t=e.sent,A(!0),r=new T.J({rpcUrl:b.$G,confirmationsThreshold:1}),e.next=8,r.waitForConfirmation(t.hash);case 8:N({title:"Pool added successfully",description:"",status:"success",duration:2e3,isClosable:!0}),R(n),A(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),A(!1),N({title:"Pool was not added",description:"",status:"error",duration:5e3,isClosable:!0});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){P(a,r,i,o,s,"next",e)}function s(e){P(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,a.jsx)(y.Z,{children:(0,a.jsxs)(h.Z,{children:[(0,a.jsxs)(s.kC,{children:[" ",(0,a.jsx)(u.Ee,{display:{base:"none",md:"block"},width:"100px",src:"".concat("/website-dev","/assets/voxel-towers-logo.svg")}),(0,a.jsx)(m.Z,{})," "]}),(0,a.jsxs)("div",{style:{position:"relative",marginBottom:"40px"},children:[(0,a.jsx)(u.Ee,{p:6,src:"".concat("/website-dev","/assets/apartments_filter_image.png")}),(0,a.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",textAlign:"center"},children:(0,a.jsx)(s.X6,{fontSize:{base:"20px",md:"50px"},children:null===E||void 0===E||null===(e=E.name)||void 0===e?void 0:e.replace(/ *\([^)]*\) */g,"")})})]}),(0,a.jsxs)(s.W2,{mb:20,maxW:"container.xl",children:[(0,a.jsx)(s.X6,{textAlign:"center",fontSize:{base:"20px",md:"28px"},mb:12,children:E.name}),(0,a.jsxs)(s.MI,{templateColumns:{base:"1fr",md:"1fr 2fr 1fr"},children:[(0,a.jsx)("div",{children:(0,a.jsx)(s.QI,{fontWeight:"600",listStyleType:"none",p:0,m:0,mb:8,children:null===E||void 0===E||null===(n=E.attributes)||void 0===n?void 0:n.map((function(e,n){return(0,a.jsxs)(s.HC,{p:2,children:[e.trait_type,": ",e.value]},n)}))})}),(0,a.jsx)(u.Ee,{gridRowStart:{base:1,md:"auto"},margin:"auto",src:C}),(0,a.jsx)("div",{children:(0,a.jsx)(s.gC,{spacing:"24px",alignItems:"left",children:(0,a.jsx)(c.zx,{isLoading:M,bg:"none",leftIcon:(0,a.jsx)(w.k6,{}),borderRadius:0,border:"1px solid black",disabled:"Yes"===function(e,n){var t;return null===(t=null===e||void 0===e?void 0:e.find((function(e){return e.trait_type===n})))||void 0===t?void 0:t.value}(null===E||void 0===E?void 0:E.attributes,"Pool")||!K,onClick:function(){return X(Number(r))},children:"POOL UPGRADE"})})})]})]}),(0,a.jsx)(v.Z,{})]})})}}},function(e){e.O(0,[445,937,199,289,307,294,596,556,774,888,179],(function(){return n=8589,e(e.s=n);var n}));var n=e.O();_N_E=n}]);